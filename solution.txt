1. Описать шаги, необходимые для диагностики и возможного устранения проблемы на
одном из сервисов, который работает медленно:
● Описать, как мы узнаём о проблеме.

- получение нотификаций (алертов) на критические состояния АПК в Slack, Telegram
- при наличии реалтайм мониторинга дашбордов, визуальная идентификация изменений на графиках, статмап и пр.
- пользовательские жалобы на некорректную работу сервисов

● Описать, как мы подтверждаем наличие проблемы.

- анализ логов на предмет наличия 4хх и 5хх кодов ответа сервиса
- при помощи grep по ключам 'err|ERR|FATAL|fatal|Err|Fatal' анализируем логи с ошибками (напр. нехватки дискового пространства, сетевые ошибки, аутентификации) 
- анализ дашбордов Zabbix, Grafana на наличие аномалий в графиках, смотрим разрезы за 12h, 24h, week, month
- подключение к целевым (связанных с работой сервиса) хостам для дополнительных проверок
- визуальная диагностика ендпоинтов в браузере при наличии веб-интерфейса

● Описать диагностику при условии, что нам доступны следующие инструменты:
  ● OpenSearch и логи в нём.
    - в веб интерфейсе Kibana > Discover
  ● Zabbix и Grafana.
    - Zabbix
      - анализ дашбордов (при наличии)
      - анализируем раздел Latest data (CPU Utilization, Memory Usage, Network Traffic и пр.)
      - раздел Problems
      - раздел Graphs
      - анализ производительности в Reports
    - Grafana
      - Explore
      - Dashboards
  ● Доступ по SSH до хостов, на которых установлен сервис.
      - проверка исрользования ресурсов на сервере
        - top, htop, free -m, df -h
        - при наличии docker контейнеров проверяем их статус и логи

● Возможное устранение проблемы:

[2024-08-27 08:56:54] [ERROR] Local snapshot was not created - No space left on device.
Указывает на нехватку дискового пространства. Это нужно подтвердить через команду df -h на сервере
либо в веб интерфейсе используемого хранилища.

[2024-08-27 08:57:04] [DEBUG] Starting scheduled job: JobID=801.
[2024-08-27 08:57:06] [ERROR] Cannot execute scheduled job.
Ошибка выполнения джобы, может быть связана с нехваткой ресурсов, ошибкой подключения к БД и пр.
По JobID можно посмотреть все этапы джобы в пайпе и определить предыдущие успешные этапы и момент фейла.

[2024-08-27 09:00:44] [DEBUG] Creating local snapshot...
[2024-08-27 09:00:45] [ERROR] Cannot create local snapshot - Previous snapshot id is incorrect.
Нужно проверить состояние предыдущего слепка (возможно он поврежден) либо возможно некорректный ID.
Проверить наличие свободного дискового пространства.
Попробовать удалить предыдущий снапшот (если он повреждён) и перезапустить джобу.

2. С использованием любого языка программирования написать скрипт, который
принимает на вход лог-файл, а на выходе даёт следующую информацию:
● Сколько всего строк в файле
● Где находится файл физически
● Количество запросов, сделанных с локального адреса хоста
● Количество запросов, сделанных из непубличной сети
● Количество запросов, сделанных с внешней сети
● Количество успешных запросов
● Количество неуспешных запросов
● Список уникальных IP и количество запросов, сделанных с них

python3 script.py

3. Привести пример настройки алерта для Grafana или OpenSearch, который будет
отправлять сообщение в Slack в случае превышения количества ошибок в логах сервиса
на всех серверах, где запущен сервис (больше, чем 50 за минуту).
4. Предоставить пример создания отчета об инциденте на основе логов, которые
предоставлены. Форма отчета - свободная.
